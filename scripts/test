#! /bin/bash

# Build all containers and run all tests
cp config/dev/docker-compose.dev.yml docker-compose.yml
./scripts/install

docker-compose run unittest

# Copy some test data
docker cp database/data/dev/behaviour_test_data.sql database:.
docker exec -it database bash -c 'psql --file=behaviour_test_data.sql -d "$POSTGRES_DB" -U "$POSTGRES_USER" '

docker-compose run apitest
docker-compose run systemtest


pylint $(find . -iname "*.py")
